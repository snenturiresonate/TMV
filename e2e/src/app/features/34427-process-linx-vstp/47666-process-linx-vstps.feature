Feature: 34427 - TMV Process LINX VSTP (S002)
  As a TMV User
  I want the system process LINX VSTP messages
  So that I can view a train's VSTP timetable and respective on the day updates

  Scenario Outline: 34427-1 Old Schedules are not displayed
    #Given a schedule has been received with <STP indicator> which has a 'Date Runs To' before the current time period
    #When a user searches for that timetable
    #Then no results are returned with that planning UID and schedule date
    Given I am on the home page
    And the vstp schedule has a schedule before current time period
    And the following VSTP update messages are sent from LINX
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<trainUid>" train_status="2" CIF_stp_indicator="<stpIndicator>"><schedule_segment signalling_id="6A29" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    When I search Timetable for '<trainUid>'
    Then no results are returned with that planning UID '<trainUid>'
    Examples:
      | trainUid |scheduleEndDate | stpIndicator |  scheduleDaysRuns |
      | A137657  | 2050-01-01     | NV           |  1111111          |


  Scenario Outline: 34427-2 Future Schedules are not displayed
    #Given a schedule has been received with <STP indicator>which has a 'Date Runs From' after the current time period
    #When a user searches for that timetable
    #Then no results are returned with that planning UID and schedule date
    Given I am on the home page
    And the vstp schedule has a schedule after current time period
    And the following VSTP update messages are sent from LINX
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<trainUid>" train_status="2" CIF_stp_indicator="<stpIndicator>"><schedule_segment signalling_id="6A29" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    When I search Timetable for '<trainUid>'
    Then no results are returned with that planning UID '<trainUid>'
    Examples:
      | trainUid |scheduleEndDate | stpIndicator |  scheduleDaysRuns |
      | A137657  | 2050-01-01      | NV          |  1111111          |


  Scenario Outline: 34427-3 Days run outside current time period are not displayed
    #Given a schedule has been received with <STP indicator> where the 'Days Runs' is not in the current time period
    #When a user searches for that timetable
    #Then no results are returned with that planning UID and schedule date
    Given I am on the home page
    And the vstp schedule has a schedule days to run not in current time period
    And the following VSTP update messages are sent from LINX
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<schedule_days_runs>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<trainUid>" train_status="2" CIF_stp_indicator="<stpIndicator>"><schedule_segment signalling_id="6A29" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    When I search Timetable for '<trainUid>'
    Then no results are returned with that planning UID '<trainUid>'
    Examples:
      | trainUid |scheduleEndDate | stpIndicator |
      | A137657  | 2050-01-01     | NV           |

  @tdd
  Scenario Outline: 34427-4 Base Schedule is displayed
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #And no other STPs have been received for that service
    #When a user searches for that timetable
    #Then one timetable with the planning UID and schedule date is returned and the type is <DisplayType>
    Given I am on the home page
    And the vstp schedule has a schedule in the current time period
    And the vstp schedule has a STP indicator '<stpIndicator>'
    And the following VSTP update messages are sent from LINX
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<trainUid>" train_status="2" CIF_stp_indicator="stp_Indicator"><schedule_segment signalling_id="6A29" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    When I search Timetable for '<trainUid>'
    Then results are returned with planning UID '<trainUid>' and schedule type '<scheduleType>'
    Examples:
      | trainUid | scheduleEndDate | scheduleDaysRuns   | stpIndicator   | scheduleType   |
      | A237657  | 2050-01-01      | 1111111            | NV             | VSTP           |
      | A337657  | 2050-01-01      | 1111111            | P,NV           | VSTP           |

  @tdd
  Scenario Outline: 34427-5 Schedule Cancellation is displayed
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user searches for that timetable
    #Then one timetable with the planning UID and schedule date is returned and the type is <DisplayType>
    Given I am on the home page
    And the vstp schedule has a schedule in the current time period
    And the vstp schedule has a STP indicator '<stpIndicator>'
    And the following VSTP update messages are sent from LINX
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<trainUid>" train_status="2" CIF_stp_indicator="stp_Indicator"><schedule_segment signalling_id="6A29" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    When I search Timetable for '<trainUid>'
    Then results are returned with planning UID '<trainUid>' and schedule type '<scheduleType>'
    Examples:
      | trainUid | scheduleEndDate | scheduleDaysRuns   | stpIndicator   | scheduleType   |
      | A32345   | 2050-01-01      | 1111111            | C,V            | VSTP CAN       |
      | A42345   | 2050-01-01      | 1111111            | P,CV           | VSTP CAN       |
      | A52345   | 2050-01-01      | 1111111            | P,O,CV         | VSTP CAN       |
      | A62345   | 2050-01-01      | 1111111            | N,CV           | VSTP CAN       |
      | A72345   | 2050-01-01      | 1111111            | N,O,CV         | VSTP CAN       |

  @tdd
  Scenario Outline: 34427-6 Schedule Overlay is displayed
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user searches for that timetable
    #Then one timetable with the planning UID and schedule date is returned and the type is <DisplayType>
    Given I am on the home page
    And the vstp schedule has a schedule in the current time period
    And the vstp schedule has a STP indicator '<stpIndicator>'
    And the following VSTP update messages are sent from LINX
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<trainUid>" train_status="2" CIF_stp_indicator="stp_Indicator"><schedule_segment signalling_id="6A29" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    When I search Timetable for '<trainUid>'
    Then results are returned with planning UID '<trainUid>' and schedule type '<scheduleType>'
    Examples:
      | trainUid | scheduleEndDate | scheduleDaysRuns   | stpIndicator   | scheduleType   |
      | A32345   | 2050-01-01      | 1111111            | O,V            | VSTP VAR       |
      | A42345   | 2050-01-01      | 1111111            | P,OV           | VSTP VAR       |
      | A52345   | 2050-01-01      | 1111111            | N,OV           | VSTP VAR       |
      | A62345   | 2050-01-01      | 1111111            | N,O,OV         | VSTP VAR       |
      | A72345   | 2050-01-01      | 1111111            | P,O,OV         | VSTP VAR       |

  @tdd
  Scenario Outline: 34427-7 Multiple schedules with the same precedence
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user searches for that timetable
    #Then newest version of the timetable with the planning UID is returned and the type is <DisplayType>
    Given I am on the home page
    And the vstp schedule has a schedule in the current time period
    And the vstp schedule has a STP indicator '<stpIndicator>'
    And the following VSTP update messages are sent from LINX
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<trainUid>" train_status="2" CIF_stp_indicator="stp_Indicator"><schedule_segment signalling_id="6A29" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    When I search Timetable for '<trainUid>'
    Then results are returned with planning UID '<trainUid>' and schedule type '<scheduleType>'
    Examples:
      | trainUid | scheduleEndDate | scheduleDaysRuns   | stpIndicator   | scheduleType   |
      | A82345   | 2050-01-01      | 1111111            | NV,NV          | VSTP VAR       |
      | A92345   | 2050-01-01      | 1111111            | OV,OV          | VSTP VAR       |
      | A03345   | 2050-01-01      | 1111111            | CV,CV          | VSTP CAN       |

  @tdd
  Scenario Outline: 34427-8 Schedule details content are displayed
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user views  that timetable
    #Then the timetable is displayed with the type is <DisplayType>
    #And the Train UID from the schedule
    #And the Train description from the schedule
    #And Details displayed match those provided in the VSTP
    Given the vstp schedule has a schedule in the current time period
    And the vstp schedule has a STP indicator '<stpIndicator>'
    And the following VSTP update messages are sent from LINX
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="D12345" train_status="2" CIF_stp_indicator="stp_Indicator"><schedule_segment signalling_id="6V10" uic_code="" atoc_code="" CIF_train_category="H4" CIF_headcode="6Y02" CIF_course_indicator="" CIF_train_service_code="57610310" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="1660"  CIF_speed="125" CIF_operating_characteristics="AB" CIF_train_class="B" CIF_sleepers="F" CIF_reservations="A" CIF_connection_indicator="" CIF_catering_code="FC" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="001101" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="001201" CIF_platform="1" CIF_line="ML" CIF_path="OL" CIF_activity="TB" CIF_engineering_allowance="1" CIF_pathing_allowance="2" CIF_performance_allowance="3"><location><tiploc tiploc_id="DRBY" /></location></schedule_location><schedule_location scheduled_arrival_time="011301" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="011401" public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="OL" CIF_activity="TF" CIF_engineering_allowance="4" CIF_pathing_allowance="5" CIF_performance_allowance="6"><location><tiploc tiploc_id="TAUNTON" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I am on the trains list page
    And The trains list table is visible
    And I invoke the context menu from train '<trainUid>' on the trains list
    And I wait for the trains list context menu to display
    When I open timetable from the context menu
    And I switch to the new tab
    Then The values for the header properties are as follows
      | schedType            | lastSignal | lastReport   | trainUid     | trustId       | lastTJM  |
      | <scheduleType>       |            |              | <trainUid>   |               |          |
    And I switch to the timetable details tab
    And The timetable details tab is visible
    And The timetable details table contains the following data in each row
      | daysRun                 | runs                | bankHoliday | berthId | operator | trainServiceCode  | trainStatusCode  | trainCategory | direction | cateringCode| class    | seatingClass| reservations | timingLoad | powerType | speed  | portionId | trainLength | trainOperatingCharacteristcs | serviceBranding |
      | <scheduleEndDate>       | <scheduleDaysRuns>  |             |         |          |                   |                  |               |           |             |          |             |              |            |           |        |           |             |                              |                 |
    Examples:
      | trainUid | scheduleEndDate | scheduleDaysRuns   | stpIndicator   | scheduleType   |
      | A23345   | 2050-01-01      | 1111111            | NV             | VSTP VAR       |
      | A33345   | 2050-01-01      | 1111111            | OV             | VSTP VAR       |
      | A43345   | 2050-01-01      | 1111111            | CV             | VSTP CAN       |

  @tdd
  Scenario Outline: 34427-9 Schedule locations are displayed
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user views that timetable with inserted locations turned off
    #Then the locations displayed match those provided in the VSTP
    Given the vstp schedule has a schedule in the current time period
    And the vstp schedule has a STP indicator '<stpIndicator>'
    And the following VSTP update messages are sent from LINX
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="D12345" train_status="2" CIF_stp_indicator="stp_Indicator"><schedule_segment signalling_id="6V10" uic_code="" atoc_code="" CIF_train_category="H4" CIF_headcode="6Y02" CIF_course_indicator="" CIF_train_service_code="57610310" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="1660"  CIF_speed="125" CIF_operating_characteristics="AB" CIF_train_class="B" CIF_sleepers="F" CIF_reservations="A" CIF_connection_indicator="" CIF_catering_code="FC" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="001101" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="001201" CIF_platform="1" CIF_line="ML" CIF_path="OL" CIF_activity="TB" CIF_engineering_allowance="1" CIF_pathing_allowance="2" CIF_performance_allowance="3"><location><tiploc tiploc_id="DRBY" /></location></schedule_location><schedule_location scheduled_arrival_time="011301" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="011401" public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="OL" CIF_activity="TF" CIF_engineering_allowance="4" CIF_pathing_allowance="5" CIF_performance_allowance="6"><location><tiploc tiploc_id="TAUNTON" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I am on the trains list page
    And The trains list table is visible
    And I invoke the context menu from train '<trainUid>' on the trains list
    And I wait for the trains list context menu to display
    When I open timetable from the context menu
    And I switch to the new tab
    Then The timetable entries contains the following data
      | location               | workingArrivalTime | workingDeptTime   | publicArrivalTime  | publicDeptTime | originalAssetCode   | originalPathCode    | originalLineCode   | allowances | activities | arrivalDateTime | deptDateTime | assetCode | pathCode | lineCode | punctuality |
      |DRBY		                 |                    |                   |	                   |        	      |                     |		                  |                    |            |            |                 |              |           |          |          |             |
      |TAUNTON		             |                    |       	          |       	           |        			  |                     |                     |                    |            |            |                 |              |           |          |          |             |
    Examples:
      | trainUid | scheduleEndDate | scheduleDaysRuns   | stpIndicator   |
      | A53345   | 2050-01-01      | 1111111            | NV             |
      | A63345   | 2050-01-01      | 1111111            | OV             |
      | A73345   | 2050-01-01      | 1111111            | CV             |


  Scenario: 34427-11 Schedule associations are displayed
    #Given schedule(s) has been received via a CIF which has an association to a schedule received via a VSTP
    #When a user views the timetable for the VSTP schedule
    #Then the associations displayed match those provided in the CIF
    Given the access plan located in CIF file 'access-plan/schedules_BS_type_C.cif' is received from LINX
    And the following VSTP update messages are sent from LINX
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="D12345" train_status="2" CIF_stp_indicator="stp_Indicator"><schedule_segment signalling_id="6V10" uic_code="" atoc_code="" CIF_train_category="H4" CIF_headcode="6Y02" CIF_course_indicator="" CIF_train_service_code="57610310" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="1660"  CIF_speed="125" CIF_operating_characteristics="AB" CIF_train_class="B" CIF_sleepers="F" CIF_reservations="A" CIF_connection_indicator="" CIF_catering_code="FC" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="001101" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="001201" CIF_platform="1" CIF_line="ML" CIF_path="OL" CIF_activity="TB" CIF_engineering_allowance="1" CIF_pathing_allowance="2" CIF_performance_allowance="3"><location><tiploc tiploc_id="DRBY" /></location></schedule_location><schedule_location scheduled_arrival_time="011301" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="011401" public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="OL" CIF_activity="TF" CIF_engineering_allowance="4" CIF_pathing_allowance="5" CIF_performance_allowance="6"><location><tiploc tiploc_id="TAUNTON" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I am on the trains list page
    And The trains list table is visible
    And I invoke the context menu from train '5Y22' on the trains list
    And I wait for the trains list context menu to display
    When I open timetable from the context menu
    And I switch to the new tab
    And I switch to the timetable details tab
    Then The entry 1 of the timetable associations table contains the following data in each column
      | Location            | Type                 | TrainDescription   |
      | Paddington          | Previous Working     | 1C80               |

