Feature: 34427 - TMV Process LINX VSTP (S002)
  As a TMV User
  I want the system process LINX VSTP messages
  So that I can view a train's VSTP timetable and respective on the day updates

  Background:
    Given I remove all trains from the trains list

  Scenario Outline: 34427-1 Old Schedules are not displayed
    #Given a schedule has been received with <STP indicator> which has a 'Date Runs To' before the current time period
    #When a user searches for that timetable
    #Then no results are returned with that planning UID and schedule date
    Given I am on the home page
    And the vstp schedule has a schedule before current time period
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<schedule_end_date>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="train_uid" train_status="2" CIF_stp_indicator="<vstpStpIndicator>"><schedule_segment signalling_id="6A21" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    When I search Timetable for 'generatedTrainUId'
    Then no results are returned with that planning UID 'generatedTrainUId'
    Examples:
      | trainUid | vstpStpIndicator | scheduleDaysRuns |
      | A13761   | N                | 1111111          |


  Scenario Outline: 34427-2 Future Schedules are not displayed
    #Given a schedule has been received with <STP indicator>which has a 'Date Runs From' after the current time period
    #When a user searches for that timetable
    #Then no results are returned with that planning UID and schedule date
    Given I am on the home page
    And the vstp schedule has a schedule after current time period
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="train_uid" train_status="2" CIF_stp_indicator="<vstpStpIndicator>"><schedule_segment signalling_id="6A22" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    When I search Timetable for 'generatedTrainUId'
    Then no results are returned with that planning UID 'generatedTrainUId'
    Examples:
      | scheduleEndDate | vstpStpIndicator | scheduleDaysRuns |
      | 20500101        | N                | 1111111          |


  Scenario Outline: 34427-3 Days run outside current time period are not displayed
    #Given a schedule has been received with <STP indicator> where the 'Days Runs' is not in the current time period
    #When a user searches for that timetable
    #Then no results are returned with that planning UID and schedule date
    Given I am on the home page
    And the vstp schedule has a schedule days to run not in current time period
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<schedule_days_runs>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="train_uid" train_status="2" CIF_stp_indicator="<vstpStpIndicator>"><schedule_segment signalling_id="<trainDescription>" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    When I search Timetable for 'generatedTrainUId'
    Then no results are returned with that planning UID 'generatedTrainUId'
    Examples:
      | trainDescription | scheduleEndDate | vstpStpIndicator |
      | 6A23             | 20500101        | N                |

  Scenario Outline: 34427-4a Base Schedule is displayed - no original cif (vstp N)
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #And no other STPs have been received for that service
    #When a user searches for that timetable
    #Then one timetable with the planning UID and schedule date is returned and the type is <DisplayType>
    Given I am on the home page
    And the vstp schedule has a schedule in the current time period with new uid
    * I remove today's train 'generatedTrainUId' from the Redis trainlist
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator>"><schedule_segment signalling_id="<trainDescription>" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I wait until today's train 'generatedTrainUId' has loaded
    When I search Timetable for 'generatedTrainUId' and wait for result
      | PlanningUid       | TrainDesc          |
      | generatedTrainUId | <trainDescription> |
    Then one result is returned for today with that planning UID generatedTrainUId and it has status <statusType> and sched <displayType> and service <trainDescription>
    Examples:
      | trainDescription | scheduleEndDate | scheduleDaysRuns | vstpStpIndicator | statusType | displayType |
      | 6P42             | 20500101        | 1111111          | N                | UNCALLED   | VSTP        |

  @bug @bug:66859
  Scenario Outline: 34427-4b Base Schedule is displayed - vstp on top of original cif (cif P, vstp N)
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #And no other STPs have been received for that service
    #When a user searches for that timetable
    #Then one timetable with the planning UID and schedule date is returned and the type is <DisplayType>
    Given I am on the home page
    # TODO - add a separate step to generate the train UID rather than do it as part of updating the CIF
    * I remove today's train 'generatedTrainUId' from the Redis trainlist
    And the train in CIF file below is updated accordingly so time at the reference point is now, and then received from LINX
      | filePath        | refLocation | refTimingType | newTrainDescription    | newPlanningUid |
      | <prevCIFLoaded> | WHATFHH     | WTT_dep       | <origTrainDescription> | generated      |
    And I wait until today's train 'generatedTrainUId' has loaded
    And the following train activation message is sent from LINX
      | trainUID          | trainNumber            | scheduledDepartureTime | locationPrimaryCode | locationSubsidiaryCode | departureDate | actualDepartureHour |
      | generatedTrainUId | <origTrainDescription> | now                    | 99999               | PADTON                 | today         | now                 |
    And the following live berth interpose message is sent from LINX
      | toBerth | trainDescriber | trainDescription       |
      | A007    | D3             | <origTrainDescription> |
    And the vstp schedule has a schedule in the current time period with existing uid
    And the following VSTP update messages are sent from LINX starting now
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator>"><schedule_segment signalling_id="<newTrainDescription>" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I am on the trains list page
    And train '<newTrainDescription>' with schedule id 'generatedTrainUId' for today is visible on the trains list
    And train description '<newTrainDescription>' is visible on the trains list with schedule type '<displayType>'
    And I give the train 1 second to load
    When I search Timetable for 'generatedTrainUId' and wait for result
      | PlanningUid       | TrainDesc             | Scheduletype  | StartDate |
      | generatedTrainUId | <newTrainDescription> | <displayType> | today     |
    Then one result is returned for today with that planning UID generatedTrainUId and it has status <statusType> and sched <displayType> and service <newTrainDescription>
    Examples:
      | prevCIFLoaded                                      | origTrainDescription | trainUid | newTrainDescription | scheduleEndDate | scheduleDaysRuns | vstpStpIndicator | statusType | displayType |
      | access-plan/34427-schedules/initial_cif_type_P.cif | 6D04                 | A23762   | 6P47                | 20500101        | 1111111          | N                | UNCALLED   | VSTP        |

  @bug @bug_61549
  Scenario Outline: 34427-5a Schedule Cancellation is displayed - no original cif (vstp C)
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user searches for that timetable
    #Then one timetable with the planning UID and schedule date is returned and the type is <DisplayType>
#    ***Can't check for load via Trains List here as cancelled services may not show*****
    Given I am on the home page
    And the vstp schedule has a schedule in the current time period with new uid
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator>"><schedule_segment signalling_id="<trainDescription>" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    When I search Timetable for 'generatedTrainUId' and wait for result
      | PlanningUid       | TrainDesc          |
      | generatedTrainUId | <trainDescription> |
    Then one result is returned for today with that planning UID generatedTrainUId and it has status <statusType> and sched <displayType> and service <trainDescription>
    Examples:
      | trainDescription | scheduleEndDate | scheduleDaysRuns | vstpStpIndicator | statusType | displayType |
      | 6P44             | 20500101        | 1111111          | C                | CANCELLED  | VSTP CAN    |

  @bug @bug_61549
  Scenario Outline: 34427-5b Schedule Cancellation is displayed - vstp on top of original cif (cif P, P then O, N, N then O followed by vstp C)
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user searches for that timetable
    #Then one timetable with the planning UID and schedule date is returned and the type is <DisplayType>
    Given I am on the home page
    And the access plan located in CIF file '<prevCIFLoaded>' is received from LINX with a generated uid
    And I am on the trains list page
    And The trains list table is visible
    And train '<trainDescription>' with schedule id 'generatedTrainUId' for today is visible on the trains list
    And train description '<trainDescription>' is visible on the trains list with schedule type '<origDisplayType>'
    And the vstp schedule has a schedule in the current time period with existing uid
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator>"></schedule></VSTPCIFMsgV1> |
    When I search Timetable for 'generatedTrainUId' and wait for result
      | PlanningUid       | Status       |
      | generatedTrainUId | <statusType> |
    Then one result is returned for today with that planning UID generatedTrainUId and it has status <statusType> and sched <displayType> and service <trainDescription>
    Examples:
      | prevCIFLoaded                                        | origDisplayType | trainDescription | scheduleEndDate | scheduleDaysRuns | vstpStpIndicator | statusType | displayType |
      | access-plan/34427-schedules/initial_cif_type_P.cif   | LTP             | 6D00             | 20500101        | 1111111          | C                | CANCELLED  | VSTP CAN    |
      | access-plan/34427-schedules/initial_cif_type_P_O.cif | VAR             | 6D01             | 20500101        | 1111111          | C                | CANCELLED  | VSTP CAN    |
      | access-plan/34427-schedules/initial_cif_type_N.cif   | STP             | 6D02             | 20500101        | 1111111          | C                | CANCELLED  | VSTP CAN    |
      | access-plan/34427-schedules/initial_cif_type_N_O.cif | VAR             | 6D03             | 20500101        | 1111111          | C                | CANCELLED  | VSTP CAN    |

  @bug @bug_61549
  Scenario Outline: 34427-6a Schedule Overlay is displayed - no original cif (vstp O)
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user searches for that timetable
    #Then one timetable with the planning UID and schedule date is returned and the type is <DisplayType>
    Given I am on the home page
    And the vstp schedule has a schedule in the current time period with new uid
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator>"><schedule_segment signalling_id="<trainDescription>" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I am on the trains list page
    And The trains list table is visible
    And train '<trainDescription>' with schedule id 'generatedTrainUId' for today is visible on the trains list
    When I search Timetable for 'generatedTrainUId' and wait for result
      | PlanningUid       | TrainDesc          |
      | generatedTrainUId | <trainDescription> |
    Then one result is returned for today with that planning UID generatedTrainUId and it has status <statusType> and sched <displayType> and service <trainDescription>
    Examples:
      | trainDescription | scheduleEndDate | scheduleDaysRuns | vstpStpIndicator | statusType | displayType |
      | 6P44             | 20500101        | 1111111          | O                | UNCALLED   | VSTP VAR    |

  @bug @bug_61549
  Scenario Outline: 34427-6b Schedule Overlay is displayed - vstp on top of original cif (cif P, P then O, N, N then O followed by vstp O)
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user searches for that timetable
    #Then one timetable with the planning UID and schedule date is returned and the type is <DisplayType>
    Given I am on the home page
    And the access plan located in CIF file '<prevCIFLoaded>' is received from LINX with a generated uid
    And I am on the trains list page
    And The trains list table is visible
    And train '<origTrainDescription>' with schedule id 'generatedTrainUId' for today is visible on the trains list
    And the vstp schedule has a schedule in the current time period with existing uid
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator>"><schedule_segment signalling_id="<newTrainDescription>" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And train '<newTrainDescription>' with schedule id 'generatedTrainUId' for today is visible on the trains list
    When I search Timetable for 'generatedTrainUId' and wait for result
      | PlanningUid       | TrainDesc             |
      | generatedTrainUId | <newTrainDescription> |
    Then one result is returned for today with that planning UID generatedTrainUId and it has status <statusType> and sched <displayType> and service <newTrainDescription>
    Examples:
      | prevCIFLoaded                                        | origTrainDescription | newTrainDescription | scheduleEndDate | scheduleDaysRuns | vstpStpIndicator | statusType | displayType |
      | access-plan/34427-schedules/initial_cif_type_P.cif   | 6D00                 | 6P45                | 20500101        | 1111111          | O                | UNCALLED   | VSTP VAR    |
      | access-plan/34427-schedules/initial_cif_type_P_O.cif | 6D01                 | 6P46                | 20500101        | 1111111          | O                | UNCALLED   | VSTP VAR    |
      | access-plan/34427-schedules/initial_cif_type_N.cif   | 6D02                 | 6P47                | 20500101        | 1111111          | O                | UNCALLED   | VSTP VAR    |
      | access-plan/34427-schedules/initial_cif_type_N_O.cif | 6D03                 | 6P48                | 20500101        | 1111111          | O                | UNCALLED   | VSTP VAR    |

  @bug @bug_61549
  Scenario Outline: 34427-7 Multiple schedules with the same precedence
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user searches for that timetable
    #Then newest version of the timetable with the planning UID is returned and the type is <DisplayType>
#    ***Can't check for load via Trains List here as cancelled services may not show*****
    Given I am on the home page
    And the vstp schedule has a schedule in the current time period with new uid
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator1>"><schedule_segment signalling_id="<trainDescription1>" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
      | <?xml version="1.0"?><VSTPCIFMsgV1 xmlns="http://xml.networkrail.co.uk/ns/2008/Train" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-04-08T02:01:19-00:00" owner="Network Rail" originMsgId="2020-04-08T02:01:19-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#QDP0255" sessionID="CU75900"/><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator2>"><schedule_segment signalling_id="<trainDescription2>" uic_code="" atoc_code="" CIF_train_category="B4" CIF_headcode="" CIF_course_indicator="" CIF_train_service_code="57622972" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="" CIF_speed="" CIF_operating_characteristics="" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="025100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="3" CIF_performance_allowance=""><location><tiploc tiploc_id="WHATFHH"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FROMNSB"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="031500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CLNKRDJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="032100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="5" CIF_performance_allowance=""><location><tiploc tiploc_id="FRWDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="033000" scheduled_departure_time="033200" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="033530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HWKRJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="034230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040230" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="040530" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="042900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="044100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="UFNGTN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="045630" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHALLOW"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="050130" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WANTRD"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="FOXHALJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051300" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCOTP"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="051400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DIDCTEJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="052330" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="GORASTR"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REDGWJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053600" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="RDNGORJ"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="053900" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SCOTEJN"/></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="054500" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEA831"/></location></schedule_location><schedule_location scheduled_arrival_time="054900" scheduled_departure_time="060900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THEARCP"/></location></schedule_location><schedule_location scheduled_arrival_time="063900" scheduled_departure_time=" " scheduled_pass_time=" " public_arrival_time="      " public_departure_time=" " CIF_platform="" CIF_line=" " CIF_path="" CIF_activity="TF" CIF_engineering_allowance=" " CIF_pathing_allowance=" " CIF_performance_allowance=" "><location><tiploc tiploc_id="THEAARC"/></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    When I search Timetable for 'generatedTrainUId' and wait for result
      | PlanningUid       | TrainDesc           |
      | generatedTrainUId | <trainDescription2> |
    Then one result is returned for today with that planning UID generatedTrainUId and it has status <statusType> and sched <displayType> and service <trainDescription2>
    Examples:
      | scheduleEndDate | scheduleDaysRuns | vstpStpIndicator1 | vstpStpIndicator2 | trainDescription1 | trainDescription2 | statusType | displayType |
      | 20500101        | 1111111          | N                 | N                 | 6D08              | 6P49              | UNCALLED   | VSTP VAR    |
      | 20500101        | 1111111          | O                 | O                 | 6D09              | 6P50              | UNCALLED   | VSTP VAR    |
      | 20500101        | 1111111          | C                 | C                 | 6D10              | 6P51              | CANCELLED  | VSTP CAN    |

  Scenario Outline: 34427-8a Schedule details content are displayed (vstp N, vstp O)
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user views  that timetable
    #Then the timetable is displayed with the type is <DisplayType>
    #And the Train UID from the schedule
    #And the Train description from the schedule
    #And Details displayed match those provided in the VSTP
    Given the vstp schedule has a schedule in the current time period with new uid
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator>"><schedule_segment signalling_id="<trainDescription>" uic_code="" atoc_code="" CIF_train_category="H4" CIF_headcode="6Y02" CIF_course_indicator="" CIF_train_service_code="22788002" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="1660"  CIF_speed="125" CIF_operating_characteristics="AB" CIF_train_class="B" CIF_sleepers="F" CIF_reservations="A" CIF_connection_indicator="" CIF_catering_code="FC" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="111100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="1" CIF_line="SL" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HDON" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="111900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="2" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSTM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="112130" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CTRDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="112600" scheduled_departure_time="112700" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="RM" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance="0.5"><location><tiploc tiploc_id="KNTSHTN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="112900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CTRDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113030" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSJN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113100" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="2" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="0.5" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSTM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113230" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="GL" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLWSJ" /></location></schedule_location><schedule_location scheduled_arrival_time="113300" scheduled_departure_time="113630" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="GL" CIF_path="GL" CIF_activity="OP" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLDER" /></location></schedule_location><schedule_location scheduled_arrival_time="114030" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="GL" CIF_activity="TF" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLDPS" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I give the system 3 seconds to load
    And I am on the timetable view for service 'generatedTrainUId'
    Then The values for the header properties are as follows
      | headCode           | schedType     | lastSignal | lastReport | trainUid          | trustId | lastTJM |
      | <trainDescription> | <displayType> |            |            | generatedTrainUId |         |         |
    And I switch to the timetable details tab
    And The timetable details tab is visible
    And The timetable details table contains the following data in each row
      | daysRun             | runs               | bankHoliday | berthId | operator | trainServiceCode | trainStatusCode | trainCategory | direction | cateringCode | class | seatingClass | reservations | timingLoad | powerType | speed  | portionId | trainLength | trainOperatingCharacteristcs | serviceBranding |
      | today to 01/01/2050 | <scheduleDaysRuns> |             |         | ET       | 22788002         | 2               | H4            |           | F,C          | 6     | B            | A            | 1660       | D         | 125mph |           | m           | A,B                          |                 |
    Examples:
      | trainDescription | scheduleEndDate | scheduleDaysRuns | vstpStpIndicator | displayType |
      | 6D11             | 20500101        | 0101011          | N                | VSTP        |
      | 6D12             | 20500101        | 1111111          | O                | VSTP VAR    |

  Scenario Outline: 34427-8b Schedule details content are displayed (vstp N then vstp C)
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user views  that timetable
    #Then the timetable is displayed with the type is <DisplayType>
    #And the Train UID from the schedule
    #And the Train description from the schedule
    #And Details displayed match those provided in the VSTP
    Given the vstp schedule has a schedule in the current time period with new uid
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator1>"><schedule_segment signalling_id="<trainDescription>" uic_code="" atoc_code="" CIF_train_category="H4" CIF_headcode="6Y02" CIF_course_indicator="" CIF_train_service_code="22788002" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="1660"  CIF_speed="125" CIF_operating_characteristics="AB" CIF_train_class="B" CIF_sleepers="F" CIF_reservations="A" CIF_connection_indicator="" CIF_catering_code="FC" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="111100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="1" CIF_line="SL" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HDON" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="111900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="2" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSTM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="112130" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CTRDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="112600" scheduled_departure_time="112700" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="RM" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance="0.5"><location><tiploc tiploc_id="KNTSHTN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="112900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CTRDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113030" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSJN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113100" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="2" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="0.5" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSTM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113230" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="GL" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLWSJ" /></location></schedule_location><schedule_location scheduled_arrival_time="113300" scheduled_departure_time="113630" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="GL" CIF_path="GL" CIF_activity="OP" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLDER" /></location></schedule_location><schedule_location scheduled_arrival_time="114030" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="GL" CIF_activity="TF" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLDPS" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator2>"><schedule_segment signalling_id="<trainDescription>" uic_code="" atoc_code="" CIF_train_category="H4" CIF_headcode="6Y02" CIF_course_indicator="" CIF_train_service_code="22788002" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="1660"  CIF_speed="125" CIF_operating_characteristics="AB" CIF_train_class="B" CIF_sleepers="F" CIF_reservations="A" CIF_connection_indicator="" CIF_catering_code="FC" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="111100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="1" CIF_line="SL" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HDON" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="111900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="2" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSTM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="112130" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CTRDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="112600" scheduled_departure_time="112700" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="RM" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance="0.5"><location><tiploc tiploc_id="KNTSHTN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="112900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CTRDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113030" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSJN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113100" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="2" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="0.5" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSTM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113230" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="GL" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLWSJ" /></location></schedule_location><schedule_location scheduled_arrival_time="113300" scheduled_departure_time="113630" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="GL" CIF_path="GL" CIF_activity="OP" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLDER" /></location></schedule_location><schedule_location scheduled_arrival_time="114030" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="GL" CIF_activity="TF" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLDPS" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I give the system 3 seconds to load
    And I am on the timetable view for service 'generatedTrainUId'
    Then The values for the header properties are as follows
      | headCode           | schedType     | lastSignal | lastReport | trainUid          | trustId | lastTJM |
      | <trainDescription> | <displayType> |            |            | generatedTrainUId |         |         |
    And I switch to the timetable details tab
    And The timetable details tab is visible
    And The timetable details table contains the following data in each row
      | daysRun             | runs               | bankHoliday | berthId | operator | trainServiceCode | trainStatusCode | trainCategory | direction | cateringCode | class | seatingClass | reservations | timingLoad | powerType | speed  | portionId | trainLength | trainOperatingCharacteristcs | serviceBranding |
      | today to 01/01/2050 | <scheduleDaysRuns> |             |         | ET       | 22788002         | 2               | H4            |           | F,C          | 6     | B            | A            | 1660       | D         | 125mph |           | m           | A,B                          |                 |
    Examples:
      | trainDescription | scheduleEndDate | scheduleDaysRuns | vstpStpIndicator1 | vstpStpIndicator2 | displayType |
      | 6D13             | 20500101        | 1111111          | N                 | C                 | VSTP CAN    |

  @bug @bug_63590
  Scenario Outline: 34427-9a Schedule locations are displayed (vstp N, vstp O)
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user views that timetable with inserted locations turned off
    #Then the locations displayed match those provided in the VSTP
    Given the vstp schedule has a schedule in the current time period with new uid
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator>"><schedule_segment signalling_id="<trainDescription>" uic_code="" atoc_code="" CIF_train_category="H4" CIF_headcode="6Y02" CIF_course_indicator="" CIF_train_service_code="22788002" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="1660"  CIF_speed="125" CIF_operating_characteristics="AB" CIF_train_class="B" CIF_sleepers="F" CIF_reservations="A" CIF_connection_indicator="" CIF_catering_code="FC" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="111100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="1" CIF_line="SL" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HDON" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="111900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="2" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSTM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="112130" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CTRDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="112600" scheduled_departure_time="112700" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="OPRM" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance="0.5"><location><tiploc tiploc_id="KNTSHTN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="112900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CTRDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113030" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSJN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113100" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="2" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="0.5" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSTM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113230" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="GL" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLWSJ" /></location></schedule_location><schedule_location scheduled_arrival_time="113300" scheduled_departure_time="113630" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="GL" CIF_path="GL" CIF_activity="OP" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLDER" /></location></schedule_location><schedule_location scheduled_arrival_time="114030" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="GL" CIF_activity="TF" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLDPS" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I give the system 3 seconds to load
    And I am on the timetable view for service 'generatedTrainUId'
    Then The values for the header properties are as follows
      | headCode           | schedType     | lastSignal | lastReport | trainUid          | trustId | lastTJM |
      | <trainDescription> | <displayType> |            |            | generatedTrainUId |         |         |
    Then The timetable entries contains the following data
      | rowNum | location                  | locInstance | workingArrivalTime | workingDeptTime | publicArrivalTime | publicDeptTime | originalAssetCode | originalPathCode | originalLineCode | allowances | activities | arrivalDateTime | deptDateTime | assetCode | pathCode | lineCode | punctuality |
      | 1      | Hendon                    | 1           |                    | 11:11:00        |                   |                | 1                 |                  | SL               |            | TB         |                 |              |           |          |          |             |
      | 2      | West Hampstead Thameslink | 1           |                    | 11:19:00        |                   |                | 1                 | SL               | SL               | [2]        |            |                 |              |           |          |          |             |
      | 3      | Carlton Road Jn           | 1           |                    | 11:21:30        |                   |                |                   | SL               | SL               |            |            |                 |              |           |          |          |             |
      | 4      | Kentish Town              | 1           | 11:26:00           | 11:27:00        |                   |                | 1                 | SL               | SL               | <0.5>      | OP,RM      |                 |              |           |          |          |             |
      | 5      | Carlton Road Jn           | 2           |                    | 11:29:00        |                   |                |                   | SL               | SL               |            |            |                 |              |           |          |          |             |
      | 6      | West Hampstead South Jn   | 1           |                    | 11:30:30        |                   |                |                   | SL               | SL               |            |            |                 |              |           |          |          |             |
      | 7      | West Hampstead Thameslink | 2           |                    | 11:31:00        |                   |                | 2                 | SL               | SL               | (0.5)      |            |                 |              |           |          |          |             |
      | 8      | Cricklewood South Jn      | 1           |                    | 11:32:30        |                   |                |                   | SL               | GL               |            |            |                 |              |           |          |          |             |
      | 9      | Cricklewood Depot Exit Rd | 1           | 11:33:00           | 11:36:30        |                   |                |                   | GL               | GL               |            | OP         |                 |              |           |          |          |             |
      | 10     | Cricklewood South Sidings | 1           | 11:40:30           |                 |                   |                |                   | GL               |                  |            | TF         |                 |              |           |          |          |             |

    Examples:
      | trainDescription | scheduleEndDate | scheduleDaysRuns | vstpStpIndicator | displayType |
      | 6D14             | 20500101        | 1111111          | N                | VSTP        |
      | 6D15             | 20500101        | 1111111          | O                | VSTP VAR    |

  @bug @bug_63590
  Scenario Outline: 34427-9b Schedule locations are displayed (vstp N then vstp C)
    #Given schedule(s) has been received with <STP indicator> that applies to the current time period (Date Runs To, Date Runs From and Days Run don't exclude it)
    #When a user views that timetable with inserted locations turned off
    #Then the locations displayed match those provided in the VSTP
    Given the vstp schedule has a schedule in the current time period with new uid
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator1>"><schedule_segment signalling_id="<trainDescription>" uic_code="" atoc_code="" CIF_train_category="H4" CIF_headcode="6Y02" CIF_course_indicator="" CIF_train_service_code="22788002" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="1660"  CIF_speed="125" CIF_operating_characteristics="AB" CIF_train_class="B" CIF_sleepers="F" CIF_reservations="A" CIF_connection_indicator="" CIF_catering_code="FC" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="111100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="1" CIF_line="SL" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HDON" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="111900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="2" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSTM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="112130" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CTRDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="112600" scheduled_departure_time="112700" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="OPRM" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance="0.5"><location><tiploc tiploc_id="KNTSHTN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="112900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CTRDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113030" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSJN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113100" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="2" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="0.5" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSTM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113230" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="GL" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLWSJ" /></location></schedule_location><schedule_location scheduled_arrival_time="113300" scheduled_departure_time="113630" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="GL" CIF_path="GL" CIF_activity="OP" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLDER" /></location></schedule_location><schedule_location scheduled_arrival_time="114030" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="GL" CIF_activity="TF" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLDPS" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="<scheduleEndDate>" schedule_days_runs="<scheduleDaysRuns>" applicable_timetable="N" CIF_bank_holiday_running="" CIF_train_uid="<train_uid>" train_status="2" CIF_stp_indicator="<vstpStpIndicator2>"><schedule_segment signalling_id="<trainDescription>" uic_code="" atoc_code="" CIF_train_category="H4" CIF_headcode="6Y02" CIF_course_indicator="" CIF_train_service_code="22788002" CIF_business_sector="" CIF_power_type="D" CIF_timing_load="1660"  CIF_speed="125" CIF_operating_characteristics="AB" CIF_train_class="B" CIF_sleepers="F" CIF_reservations="A" CIF_connection_indicator="" CIF_catering_code="FC" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="111100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="      " CIF_platform="1" CIF_line="SL" CIF_path=" " CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HDON" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="111900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="2" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSTM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="112130" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CTRDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="112600" scheduled_departure_time="112700" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="OPRM" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance="0.5"><location><tiploc tiploc_id="KNTSHTN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="112900" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CTRDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113030" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSJN" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113100" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="2" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="0.5" CIF_performance_allowance=""><location><tiploc tiploc_id="WHMPSTM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="113230" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="GL" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLWSJ" /></location></schedule_location><schedule_location scheduled_arrival_time="113300" scheduled_departure_time="113630" scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="GL" CIF_path="GL" CIF_activity="OP" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLDER" /></location></schedule_location><schedule_location scheduled_arrival_time="114030" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="GL" CIF_activity="TF" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CRKLDPS" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I give the system 3 seconds to load
    And I am on the timetable view for service 'generatedTrainUId'
    Then The values for the header properties are as follows
      | headCode           | schedType     | lastSignal | lastReport | trainUid          | trustId | lastTJM |
      | <trainDescription> | <displayType> |            |            | generatedTrainUId |         |         |
    Then The timetable entries contains the following data
      | rowNum | location                  | locInstance | workingArrivalTime | workingDeptTime | publicArrivalTime | publicDeptTime | originalAssetCode | originalPathCode | originalLineCode | allowances | activities | arrivalDateTime | deptDateTime | assetCode | pathCode | lineCode | punctuality |
      | 1      | Hendon                    | 1           |                    | 11:11:00        |                   |                | 1                 |                  | SL               |            | TB         |                 |              |           |          |          |             |
      | 2      | West Hampstead Thameslink | 1           |                    | 11:19:00        |                   |                | 1                 | SL               | SL               | [2]        |            |                 |              |           |          |          |             |
      | 3      | Carlton Road Jn           | 1           |                    | 11:21:30        |                   |                |                   | SL               | SL               |            |            |                 |              |           |          |          |             |
      | 4      | Kentish Town              | 1           | 11:26:00           | 11:27:00        |                   |                | 1                 | SL               | SL               | <0.5>      | OP,RM      |                 |              |           |          |          |             |
      | 5      | Carlton Road Jn           | 2           |                    | 11:29:00        |                   |                |                   | SL               | SL               |            |            |                 |              |           |          |          |             |
      | 6      | West Hampstead South Jn   | 1           |                    | 11:30:30        |                   |                |                   | SL               | SL               |            |            |                 |              |           |          |          |             |
      | 7      | West Hampstead Thameslink | 2           |                    | 11:31:00        |                   |                | 2                 | SL               | SL               | (0.5)      |            |                 |              |           |          |          |             |
      | 8      | Cricklewood South Jn      | 1           |                    | 11:32:30        |                   |                |                   | SL               | GL               |            |            |                 |              |           |          |          |             |
      | 9      | Cricklewood Depot Exit Rd | 1           | 11:33:00           | 11:36:30        |                   |                |                   | GL               | GL               |            | OP         |                 |              |           |          |          |             |
      | 10     | Cricklewood South Sidings | 1           | 11:40:30           |                 |                   |                |                   | GL               |                  |            | TF         |                 |              |           |          |          |             |

    Examples:
      | trainDescription | scheduleEndDate | scheduleDaysRuns | vstpStpIndicator1 | vstpStpIndicator2 | displayType |
      | 6D16             | 20500101        | 1111111          | N                 | C                 | VSTP CAN    |

  @bug @bug_61862 @bug_61862 @bug_63592
  Scenario Outline: 34427-11a Schedule associations are displayed - Next-previous - vstp overlay on Train 2 and then Train 3
    #Given schedule(s) has been received via a CIF which has an association to a schedule received via a VSTP
    #When a user views the timetable for the VSTP schedule
    #Then the associations displayed match those provided in the CIF
    Given the access plan located in CIF file 'access-plan/associations_test.cif' is received from LINX
    Given I am on the trains list page
    And The trains list table is visible
    And train '<trainDesc1>' with schedule id '<trainUid1>' for today is visible on the trains list
    And the vstp schedule has a schedule in the current time period with no initial uid
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="20500101" schedule_days_runs="1111111" applicable_timetable="Y" CIF_bank_holiday_running="" CIF_train_uid="<trainUid2>" train_status="P" CIF_stp_indicator="O"><schedule_segment signalling_id="<newTrainDesc2>" uic_code="" atoc_code="GW" CIF_train_category="OO" CIF_headcode="6Y02" CIF_course_indicator="" CIF_train_service_code="25485001" CIF_business_sector="" CIF_power_type="DMU" CIF_timing_load="E"  CIF_speed="090" CIF_operating_characteristics="" CIF_train_class="S" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="173300" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="001201" CIF_platform="2" CIF_line="" CIF_path="" CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="SDON" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="173930" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WTNBSTJ" /></location></schedule_location><schedule_location scheduled_arrival_time="174730" scheduled_departure_time="174830" scheduled_pass_time="      " public_arrival_time="174800" public_departure_time="174800" CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="T" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHIPNHM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="175100" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLEJ" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="175200" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="THNGLYJ" /></location></schedule_location><schedule_location scheduled_arrival_time="175700" scheduled_departure_time="175800" scheduled_pass_time="      " public_arrival_time="175700" public_departure_time="175800" CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="T" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="MELKSHM" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="180400" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BRDFDJN" /></location></schedule_location><schedule_location scheduled_arrival_time="180630" scheduled_departure_time="180730" scheduled_pass_time="      " public_arrival_time="180700" public_departure_time="180700" CIF_platform="" CIF_line="" CIF_path="" CIF_activity="T" CIF_engineering_allowance="1" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="TRWBRDG" /></location></schedule_location><schedule_location scheduled_arrival_time="181400" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="181500" public_departure_time="      " CIF_platform="2" CIF_line="" CIF_path="" CIF_activity="TF" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I give the system 3 seconds to load
    And I am on the timetable view for service '<trainUid1>'
    And I switch to the timetable details tab
    And The timetable details tab is visible
    Then The timetable associations table contains the following entries
      | location    | type         | trainDescription |
      | <assocLoc1> | Next Working | <newtrainDesc2>  |
    When I am on the timetable view for service '<trainUid2>'
    And I switch to the timetable details tab
    And The timetable details tab is visible
    Then The timetable associations table contains the following entries
      | location    | type             | trainDescription |
      | <assocLoc1> | Previous Working | <trainDesc1>     |
      | <assocLoc2> | Next Working     | <origTrainDesc3> |
    When I am on the timetable view for service '<trainUid3>'
    And I switch to the timetable details tab
    And The timetable details tab is visible
    Then The timetable associations table contains the following entries
      | location    | type             | trainDescription |
      | <assocLoc2> | Previous Working | <newTrainDesc2>  |
    When the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="20500101" schedule_days_runs="1111111" applicable_timetable="Y" CIF_bank_holiday_running="" CIF_train_uid="<trainUid2>" train_status="P" CIF_stp_indicator="O"><schedule_segment signalling_id="<newTrainDesc2>" uic_code="" atoc_code="GW" CIF_train_category="OO" CIF_headcode="6Y02" CIF_course_indicator="" CIF_train_service_code="25485001" CIF_business_sector="" CIF_power_type="DMU" CIF_timing_load="E"  CIF_speed="090" CIF_operating_characteristics="" CIF_train_class="S" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="182100" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="182100" CIF_platform="2" CIF_line="" CIF_path="" CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WSTBRYW" /></location></schedule_location><schedule_location scheduled_arrival_time="182400" scheduled_departure_time="182430" scheduled_pass_time="      " public_arrival_time="182300" public_departure_time="182300" CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="DILTONM" /></location></schedule_location><schedule_location scheduled_arrival_time="183000" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="183000" public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="TF" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="WRMNSTR" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I give the system 3 seconds to load
    And I am on the timetable view for service '<trainUid2>'
    And I switch to the timetable details tab
    And The timetable details tab is visible
    Then The timetable associations table contains the following entries
      | location    | type             | trainDescription |
      | <assocLoc1> | Previous Working | <trainDesc1>     |
      | <assocLoc2> | Next Working     | <newTrainDesc3>  |
    When I am on the timetable view for service '<trainUid3>'
    And I switch to the timetable details tab
    And The timetable details tab is visible
    Then The timetable associations table contains the following entries
      | location    | type             | trainDescription |
      | <assocLoc2> | Previous Working | <newTrainDesc2>  |

    Examples:
      | trainDesc1 | trainUid1 | origTrainDesc2 | newTrainDesc2 | trainUid2 | origTrainDesc3 | newTrainDesc3 | trainUid3 | assocLoc1 | assocLoc2 |
      | 2B99       | Y74849    | 2M39           | 2M40          | L78729    | 2F97           | 2F98          | Y95036    | Swindon   | Westbury  |


  @bug @bug_61862 @bug_63592
  Scenario Outline: 34427-11b Schedule associations are displayed - Joins: first train has VSTP overlay
    #Given schedule(s) has been received via a CIF which has an association to a schedule received via a VSTP
    #When a user views the timetable for the VSTP schedule
    #Then the associations displayed match those provided in the CIF
    Given the access plan located in CIF file 'access-plan/associations_test.cif' is received from LINX
    And I am on the trains list page
    And The trains list table is visible
    And train '<trainDesc1>' with schedule id '<trainUid1>' for today is visible on the trains list
    And the vstp schedule has a schedule in the current time period with no initial uid
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="20500101" schedule_days_runs="1111111" applicable_timetable="Y" CIF_bank_holiday_running="" CIF_train_uid="<trainUid1>" train_status="P" CIF_stp_indicator="O"><schedule_segment signalling_id="<newTrainDesc1>" uic_code="" atoc_code="SN" CIF_train_category="OO" CIF_headcode="6400" CIF_course_indicator="" CIF_train_service_code="24786000" CIF_business_sector="" CIF_power_type="EMU" CIF_timing_load=""  CIF_speed="100" CIF_operating_characteristics="D" CIF_train_class="" CIF_sleepers="" CIF_reservations="" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="075000" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="075000" CIF_platform="3" CIF_line="" CIF_path="" CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="TATNHMC" /></location></schedule_location><schedule_location scheduled_arrival_time="075330" scheduled_departure_time="075400" scheduled_pass_time="      " public_arrival_time="075400" public_departure_time="075400" CIF_platform="" CIF_line="" CIF_path="" CIF_activity="T" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="TADWTH" /></location></schedule_location><schedule_location scheduled_arrival_time="075700" scheduled_departure_time="075730" scheduled_pass_time="      " public_arrival_time="075700" public_departure_time="075700" CIF_platform="" CIF_line="" CIF_path="" CIF_activity="T" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="KGWD" /></location></schedule_location><schedule_location scheduled_arrival_time="080230" scheduled_departure_time="080300" scheduled_pass_time="      " public_arrival_time="080300" public_departure_time="080300" CIF_platform="" CIF_line="" CIF_path="" CIF_activity="T" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="CHSD" /></location></schedule_location><schedule_location scheduled_arrival_time="080530" scheduled_departure_time="080600" scheduled_pass_time="      " public_arrival_time="080600" public_departure_time="080600" CIF_platform="" CIF_line="" CIF_path="" CIF_activity="T" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance="1"><location><tiploc tiploc_id="WDMNSTR" /></location></schedule_location><schedule_location scheduled_arrival_time="080900" scheduled_departure_time="081000" scheduled_pass_time="      " public_arrival_time="080900" public_departure_time="081000" CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="T" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="COLSTWN" /></location></schedule_location><schedule_location scheduled_arrival_time="081230" scheduled_departure_time="081300" scheduled_pass_time="      " public_arrival_time="081300" public_departure_time="081300" CIF_platform="" CIF_line="" CIF_path="" CIF_activity="T" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="REEDHMS" /></location></schedule_location><schedule_location scheduled_arrival_time="081600" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="081600" public_departure_time="      " CIF_platform="5" CIF_line="" CIF_path="" CIF_activity="TF" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="PURLEY" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I give the system 3 seconds to load
    And I am on the timetable view for service '<trainUid1>'
    And I switch to the timetable details tab
    And The timetable details tab is visible
    Then The timetable associations table contains the following entries
      | location   | type | trainDescription |
      | <assocLoc> | Join | <origTrainDesc2> |
    When I am on the timetable view for service '<trainUid2>'
    And I switch to the timetable details tab
    And The timetable details tab is visible
    Then The timetable associations table contains the following entries
      | location   | type | trainDescription |
      | <assocLoc> | Join | <newTrainDesc1>  |

    Examples:
      | trainDesc1 | trainUid1 | newTrainDesc1 | origTrainDesc2 | trainUid2 | assocLoc |
      | 2P13       | L063041   | 2P14          | 2G13           | L06304    | Purley   |

  @bug @bug_61862
  Scenario Outline: 34427-11b Schedule associations are displayed - Splits: second train has VSTP overlay
    #Given schedule(s) has been received via a CIF which has an association to a schedule received via a VSTP
    #When a user views the timetable for the VSTP schedule
    #Then the associations displayed match those provided in the CIF
    Given the access plan located in CIF file 'access-plan/associations_test.cif' is received from LINX
    And I am on the trains list page
    And The trains list table is visible
    And train '<trainDesc1>' with schedule id '<trainUid1>' for today is visible on the trains list
    And the vstp schedule has a schedule in the current time period with no initial uid
    And the following VSTP update messages are sent from LINX starting as specified
      | asXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      | <?xml version="1.0"?><VSTPCIFMsgV1   xmlns="http://xml.networkrail.co.uk/ns/2008/Train"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:eai="http://xml.networkrail.co.uk/ns/2008/EAI" classification="industry" timestamp="2020-02-24T00:47:08-00:00" owner="Network Rail" originMsgId="2020-02-24T00:47:10-00:00@vstp.networkrail.co.uk"><eai:Sender organisation="Network Rail" application="TSIA" component="TSIA" userID="#WAEDMRT" sessionID="X289735" /><schedule schedule_id="" transaction_type="Create" schedule_start_date="<schedule_start_date>" schedule_end_date="20500101" schedule_days_runs="1111111" applicable_timetable="Y" CIF_bank_holiday_running="" CIF_train_uid="<trainUid2>" train_status="P" CIF_stp_indicator="O"><schedule_segment signalling_id="<newTrainDesc2>" uic_code="" atoc_code="SN" CIF_train_category="XX" CIF_headcode="6400" CIF_course_indicator="" CIF_train_service_code="24746000" CIF_business_sector="" CIF_power_type="EMU" CIF_timing_load=""  CIF_speed="100" CIF_operating_characteristics="D" CIF_train_class="B" CIF_sleepers="" CIF_reservations="S" CIF_connection_indicator="" CIF_catering_code="" CIF_service_branding="" CIF_traction_class=""><schedule_location scheduled_arrival_time=" " scheduled_departure_time="220700" scheduled_pass_time=" " public_arrival_time=" " public_departure_time="220700" CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="TB" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HYWRDSH" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="221030" public_arrival_time="      " public_departure_time="      " CIF_platform="" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="KEYMERJ" /></location></schedule_location><schedule_location scheduled_arrival_time="      " scheduled_departure_time="      " scheduled_pass_time="221100" public_arrival_time="      " public_departure_time="      " CIF_platform="1" CIF_line="" CIF_path="" CIF_activity="" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="BURGESH" /></location></schedule_location><schedule_location scheduled_arrival_time="221800" scheduled_departure_time="221830" scheduled_pass_time="      " public_arrival_time="221800" public_departure_time="221800" CIF_platform="3" CIF_line="" CIF_path="" CIF_activity="T" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="PRSP" /></location></schedule_location><schedule_location scheduled_arrival_time="222130" scheduled_departure_time="      " scheduled_pass_time="      " public_arrival_time="222200" public_departure_time="      " CIF_platform="3" CIF_line="" CIF_path="" CIF_activity="TF" CIF_engineering_allowance="" CIF_pathing_allowance="" CIF_performance_allowance=""><location><tiploc tiploc_id="HOVE" /></location></schedule_location></schedule_segment></schedule></VSTPCIFMsgV1> |
    And I give the system 3 seconds to load
    And I am on the timetable view for service '<trainUid1>'
    And I switch to the timetable details tab
    And The timetable details tab is visible
    Then The timetable associations table contains the following entries
      | location   | type  | trainDescription |
      | <assocLoc> | Split | <newTrainDesc2>  |
    When I am on the timetable view for service '<trainUid2>'
    And I switch to the timetable details tab
    And The timetable details tab is visible
    Then The timetable associations table contains the following entries
      | location   | type  | trainDescription |
      | <assocLoc> | Split | <origTrainDesc1> |

    Examples:
      | trainDesc1 | trainUid1 | newTrainDesc2 | trainUid2 | assocLoc       |
      | 1H63       | G46338    | 1H66          | W21919    | Haywards Heath |


